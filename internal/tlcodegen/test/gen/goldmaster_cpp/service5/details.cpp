// Code generated by vktl/cmd/tlgen2; DO NOT EDIT.
#include "service5/headers/service5.Output.h"
#include "service5/headers/service5.stringOutput.h"
#include "service5/headers/service5.emptyOutput.h"


bool tl2::service5::EmptyOutput::write_json(std::ostream& s)const {
	if (!::tl2::details::Service5EmptyOutputWriteJSON(s, *this)) { return false; }
	return true;
}

bool tl2::service5::EmptyOutput::read(::basictl::tl_istream & s) noexcept {
	if (!::tl2::details::Service5EmptyOutputRead(s, *this)) { return s.set_error_unknown_scenario(); }
	s.last_release();
	return true;
}

bool tl2::service5::EmptyOutput::write(::basictl::tl_ostream & s)const noexcept {
	if (!::tl2::details::Service5EmptyOutputWrite(s, *this)) { return s.set_error_unknown_scenario(); }
	s.last_release();
	return true;
}

void tl2::service5::EmptyOutput::read_or_throw(::basictl::tl_throwable_istream & s) {
	::basictl::tl_istream s2(s);
	this->read(s2);
	s2.pass_data(s);
}

void tl2::service5::EmptyOutput::write_or_throw(::basictl::tl_throwable_ostream & s)const {
	::basictl::tl_ostream s2(s);
	this->write(s2);
	s2.pass_data(s);
}

bool tl2::service5::EmptyOutput::read_boxed(::basictl::tl_istream & s) noexcept {
	if (!::tl2::details::Service5EmptyOutputReadBoxed(s, *this)) { return s.set_error_unknown_scenario(); }
	s.last_release();
	return true;
}

bool tl2::service5::EmptyOutput::write_boxed(::basictl::tl_ostream & s)const noexcept {
	if (!::tl2::details::Service5EmptyOutputWriteBoxed(s, *this)) { return s.set_error_unknown_scenario(); }
	s.last_release();
	return true;
}

void tl2::service5::EmptyOutput::read_boxed_or_throw(::basictl::tl_throwable_istream & s) {
	::basictl::tl_istream s2(s);
	this->read_boxed(s2);
	s2.pass_data(s);
}

void tl2::service5::EmptyOutput::write_boxed_or_throw(::basictl::tl_throwable_ostream & s)const {
	::basictl::tl_ostream s2(s);
	this->write_boxed(s2);
	s2.pass_data(s);
}

void tl2::details::Service5EmptyOutputReset(::tl2::service5::EmptyOutput& item) noexcept {
}

bool tl2::details::Service5EmptyOutputWriteJSON(std::ostream& s, const ::tl2::service5::EmptyOutput& item) noexcept {
	s << "true";
	return true;
}

bool tl2::details::Service5EmptyOutputRead(::basictl::tl_istream & s, ::tl2::service5::EmptyOutput& item) noexcept {
	return true;
}

bool tl2::details::Service5EmptyOutputWrite(::basictl::tl_ostream & s, const ::tl2::service5::EmptyOutput& item) noexcept {
	return true;
}

bool tl2::details::Service5EmptyOutputReadBoxed(::basictl::tl_istream & s, ::tl2::service5::EmptyOutput& item) {
	if (!s.nat_read_exact_tag(0xff8f7db8)) { return false; }
	return tl2::details::Service5EmptyOutputRead(s, item);
}

bool tl2::details::Service5EmptyOutputWriteBoxed(::basictl::tl_ostream & s, const ::tl2::service5::EmptyOutput& item) {
	if (!s.nat_write(0xff8f7db8)) { return false; }
	return tl2::details::Service5EmptyOutputWrite(s, item);
}

static const std::string_view Service5Output_tbl_tl_name[]{"service5.emptyOutput", "service5.stringOutput"};
static const uint32_t Service5Output_tbl_tl_tag[]{0xff8f7db8, 0xdc170ff4};

bool tl2::service5::Output::write_json(std::ostream & s)const {
	if (!::tl2::details::Service5OutputWriteJSON(s, *this)) { return false; }
	return true;
}
bool tl2::service5::Output::read_boxed(::basictl::tl_istream & s) noexcept {
	if (!::tl2::details::Service5OutputReadBoxed(s, *this)) { return s.set_error_unknown_scenario(); }
	return true;
}
bool tl2::service5::Output::write_boxed(::basictl::tl_ostream & s)const noexcept {
	if (!::tl2::details::Service5OutputWriteBoxed(s, *this)) { return s.set_error_unknown_scenario(); }
	return true;
}

void tl2::service5::Output::read_boxed_or_throw(::basictl::tl_throwable_istream & s) {
	::basictl::tl_istream s2(s);
	this->read_boxed(s2);
	s2.pass_data(s);
}

void tl2::service5::Output::write_boxed_or_throw(::basictl::tl_throwable_ostream & s)const {
	::basictl::tl_ostream s2(s);
	this->write_boxed(s2);
	s2.pass_data(s);
}

std::string_view tl2::service5::Output::tl_name() const {
	return Service5Output_tbl_tl_name[value.index()];
}
uint32_t tl2::service5::Output::tl_tag() const {
	return Service5Output_tbl_tl_tag[value.index()];
}


void tl2::details::Service5OutputReset(::tl2::service5::Output& item) noexcept{
	item.value.emplace<0>(); // TODO - optimize, if already 0, call Reset function
}

bool tl2::details::Service5OutputWriteJSON(std::ostream & s, const ::tl2::service5::Output& item) noexcept {
	s << "{";
	s << "\"type\":";
	s << "\"" << Service5Output_tbl_tl_name[item.value.index()] << "\"";
	switch (item.value.index()) {
	case 1:
		s << ",\"value\":";
		if (!::tl2::details::Service5StringOutputWriteJSON(s, std::get<1>(item.value))) { return false; }
		break;
	}
	s << "}";
	return true;
}
bool tl2::details::Service5OutputReadBoxed(::basictl::tl_istream & s, ::tl2::service5::Output& item) noexcept {
	uint32_t nat;
	if (!s.nat_read(nat)) { return false; }
	switch (nat) {
	case 0xff8f7db8:
		if (item.value.index() != 0) { item.value.emplace<0>(); }
		break;
	case 0xdc170ff4:
		if (item.value.index() != 1) { item.value.emplace<1>(); }
		if (!::tl2::details::Service5StringOutputRead(s, std::get<1>(item.value))) { return s.set_error_unknown_scenario(); }
		break;
	default:
		return s.set_error_union_tag();
    }
	return true;
}

bool tl2::details::Service5OutputWriteBoxed(::basictl::tl_ostream & s, const ::tl2::service5::Output& item) noexcept{
	if (!s.nat_write(Service5Output_tbl_tl_tag[item.value.index()])) { return false; }
	switch (item.value.index()) {
	case 1:
		if (!::tl2::details::Service5StringOutputWrite(s, std::get<1>(item.value))) { return s.set_error_unknown_scenario(); }
		break;
	}
	return true;
}

bool tl2::service5::StringOutput::write_json(std::ostream& s)const {
	if (!::tl2::details::Service5StringOutputWriteJSON(s, *this)) { return false; }
	return true;
}

bool tl2::service5::StringOutput::read(::basictl::tl_istream & s) noexcept {
	if (!::tl2::details::Service5StringOutputRead(s, *this)) { return s.set_error_unknown_scenario(); }
	s.last_release();
	return true;
}

bool tl2::service5::StringOutput::write(::basictl::tl_ostream & s)const noexcept {
	if (!::tl2::details::Service5StringOutputWrite(s, *this)) { return s.set_error_unknown_scenario(); }
	s.last_release();
	return true;
}

void tl2::service5::StringOutput::read_or_throw(::basictl::tl_throwable_istream & s) {
	::basictl::tl_istream s2(s);
	this->read(s2);
	s2.pass_data(s);
}

void tl2::service5::StringOutput::write_or_throw(::basictl::tl_throwable_ostream & s)const {
	::basictl::tl_ostream s2(s);
	this->write(s2);
	s2.pass_data(s);
}

bool tl2::service5::StringOutput::read_boxed(::basictl::tl_istream & s) noexcept {
	if (!::tl2::details::Service5StringOutputReadBoxed(s, *this)) { return s.set_error_unknown_scenario(); }
	s.last_release();
	return true;
}

bool tl2::service5::StringOutput::write_boxed(::basictl::tl_ostream & s)const noexcept {
	if (!::tl2::details::Service5StringOutputWriteBoxed(s, *this)) { return s.set_error_unknown_scenario(); }
	s.last_release();
	return true;
}

void tl2::service5::StringOutput::read_boxed_or_throw(::basictl::tl_throwable_istream & s) {
	::basictl::tl_istream s2(s);
	this->read_boxed(s2);
	s2.pass_data(s);
}

void tl2::service5::StringOutput::write_boxed_or_throw(::basictl::tl_throwable_ostream & s)const {
	::basictl::tl_ostream s2(s);
	this->write_boxed(s2);
	s2.pass_data(s);
}

void tl2::details::Service5StringOutputReset(::tl2::service5::StringOutput& item) noexcept {
	item.http_code = 0;
	item.response.clear();
}

bool tl2::details::Service5StringOutputWriteJSON(std::ostream& s, const ::tl2::service5::StringOutput& item) noexcept {
	auto add_comma = false;
	s << "{";
	if (item.http_code != 0) {
		add_comma = true;
		s << "\"http_code\":";
		s << item.http_code;
	}
	if (item.response.size() != 0) {
		if (add_comma) {
			s << ",";
		}
		add_comma = true;
		s << "\"response\":";
		s << "\"" << item.response << "\"";
	}
	s << "}";
	return true;
}

bool tl2::details::Service5StringOutputRead(::basictl::tl_istream & s, ::tl2::service5::StringOutput& item) noexcept {
	if (!s.int_read(item.http_code)) { return false; }
	if (!s.string_read(item.response)) { return false; }
	return true;
}

bool tl2::details::Service5StringOutputWrite(::basictl::tl_ostream & s, const ::tl2::service5::StringOutput& item) noexcept {
	if (!s.int_write(item.http_code)) { return false;}
	if (!s.string_write(item.response)) { return false;}
	return true;
}

bool tl2::details::Service5StringOutputReadBoxed(::basictl::tl_istream & s, ::tl2::service5::StringOutput& item) {
	if (!s.nat_read_exact_tag(0xdc170ff4)) { return false; }
	return tl2::details::Service5StringOutputRead(s, item);
}

bool tl2::details::Service5StringOutputWriteBoxed(::basictl::tl_ostream & s, const ::tl2::service5::StringOutput& item) {
	if (!s.nat_write(0xdc170ff4)) { return false; }
	return tl2::details::Service5StringOutputWrite(s, item);
}
